#include <sl_def.h>

//#define ACTION_REPLAY			//utile

#ifdef ACTION_REPLAY
static Uint8	FntAsciiFontData2bpp[] = {
//Tile number 0x000
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x001
,   0x01,0x40,0x06,0x90,0x06,0x90,0x07,0xD0,0x06,0x40,0x05,0x00,0x1A,0x40,0x05,0x00
//Tile number 0x002
,   0x55,0x54,0x7D,0xF4,0x7D,0xF4,0x5D,0x74,0x15,0x54,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x003
,   0x04,0x10,0x1D,0x74,0x7F,0xFD,0x1D,0x74,0x19,0x64,0x6A,0xA9,0x19,0x64,0x04,0x10
//Tile number 0x004
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x00,0xF4,0x00
//Tile number 0x005
,   0x15,0x05,0x7F,0x5D,0x77,0x75,0x7D,0xD4,0x16,0x69,0x19,0x99,0x65,0xA9,0x51,0x54
//Tile number 0x006
,   0x05,0x40,0x1F,0xD0,0x1D,0xD0,0x17,0x40,0x69,0x90,0x69,0x64,0x1A,0x99,0x05,0x44
//Tile number 0x007
,   0x01,0x50,0x01,0xD0,0x07,0x40,0x05,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x008
,   0x03,0xC0,0x0F,0x40,0x0D,0x00,0x0D,0x00,0x09,0x00,0x0A,0x00,0x02,0x80,0x00,0x50
//Tile number 0x009
,   0x0F,0x00,0x07,0xC0,0x00,0xD0,0x00,0xD0,0x00,0x90,0x02,0x90,0x0A,0x40,0x05,0x00
//Tile number 0x00A
,   0x05,0x40,0x57,0x54,0x77,0x74,0x5F,0xD4,0x17,0x50,0x5A,0x94,0x66,0x64,0x15,0x50
//Tile number 0x00B
,   0x00,0x00,0x05,0x40,0x07,0x40,0x57,0x54,0x7F,0xF4,0x56,0x54,0x06,0x40,0x05,0x40
//Tile number 0x00C
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x50,0x01,0xD0,0x07,0x40,0x05,0x00
//Tile number 0x00D
,   0x00,0x00,0x00,0x00,0x00,0x00,0x15,0x50,0x7F,0xF4,0x15,0x50,0x00,0x00,0x00,0x00
//Tile number 0x00E
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x50,0x01,0x90,0x01,0x50
//Tile number 0x00F
,   0x00,0x00,0x00,0x30,0x00,0xD0,0x03,0x40,0x0D,0x00,0x34,0x00,0x10,0x00,0x00,0x00
//Tile number 0x010
,   0x05,0x50,0x1F,0xF4,0x7D,0x7D,0x7D,0x7D,0x69,0x69,0x69,0x69,0x1A,0xA4,0x01,0x50
//Tile number 0x011
,   0x05,0x50,0x17,0xD0,0x1F,0xD0,0x17,0xD0,0x06,0x90,0x16,0x94,0x1A,0xA4,0x15,0x50
//Tile number 0x012
,   0x05,0x50,0x1F,0xF4,0x7D,0x7D,0x7D,0x7D,0x15,0xA4,0x5A,0x55,0x6A,0xA9,0x55,0x55
//Tile number 0x013
,   0x05,0x50,0x1F,0xF4,0x7D,0x7D,0x15,0xF4,0x15,0x69,0x69,0x69,0x1A,0xA4,0x05,0x50
//Tile number 0x014
,   0x00,0x54,0x01,0xF4,0x07,0xF4,0x1D,0xF4,0x65,0xA5,0x6A,0xA9,0x55,0xA5,0x01,0x54
//Tile number 0x015
,   0x55,0x54,0x7F,0xF4,0x7D,0x54,0x7F,0xF5,0x55,0x69,0x69,0x69,0x1A,0xA4,0x05,0x50
//Tile number 0x016
,   0x05,0x54,0x1F,0xF4,0x7D,0x54,0x7F,0xF5,0x69,0x69,0x69,0x69,0x1A,0xA4,0x05,0x50
//Tile number 0x017
,   0x55,0x55,0x7F,0xFD,0x7D,0x7D,0x55,0xD4,0x06,0x90,0x06,0x90,0x06,0x90,0x05,0x50
//Tile number 0x018
,   0x05,0x50,0x1F,0xF4,0x7D,0x7D,0x1F,0xF4,0x69,0x69,0x69,0x69,0x1A,0xA4,0x05,0x50
//Tile number 0x019
,   0x05,0x50,0x1F,0xF4,0x7D,0x7D,0x7D,0x7D,0x5A,0xA9,0x15,0x69,0x1A,0xA4,0x15,0x50
//Tile number 0x01A
,   0x05,0x40,0x07,0x40,0x05,0x40,0x00,0x00,0x05,0x40,0x07,0x40,0x05,0x40,0x00,0x00
//Tile number 0x01B
,   0x01,0x40,0x01,0xD0,0x55,0xF4,0x7F,0xFD,0x7F,0xFD,0x55,0xF4,0x01,0x90,0x01,0x40
//Tile number 0x01C
,   0x01,0x40,0x07,0x40,0x1F,0x55,0x7F,0xFD,0x7F,0xFD,0x1F,0x55,0x06,0x40,0x01,0x40
//Tile number 0x01D
,   0x05,0x55,0x07,0xFD,0x05,0x55,0x40,0x00,0x45,0x55,0x07,0xFD,0x05,0x55,0x00,0x00
//Tile number 0x01E
,   0x00,0x30,0x00,0xD0,0x03,0x40,0x0D,0x00,0x07,0x00,0x01,0xC0,0x00,0x70,0x00,0x10
//Tile number 0x01F
,   0x3F,0xF0,0xFF,0xFC,0xF5,0x7D,0x14,0xF5,0x0F,0xD4,0x01,0x50,0x0F,0xC0,0x01,0x50
//Tile number 0x020
,   0x0F,0xC0,0x35,0x70,0xD7,0x0C,0xD3,0xFD,0xD3,0x5D,0x30,0x75,0x0F,0xD4,0x01,0x50
//Tile number 0x021
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x6A,0xA9,0x69,0x59,0x55,0x15
//Tile number 0x022
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7F,0xF5,0x69,0x59,0x69,0x59,0x6A,0xA5,0x55,0x54
//Tile number 0x023
,   0x15,0x54,0x5F,0xF5,0x7D,0x7D,0x7D,0x55,0x69,0x55,0x69,0x69,0x5A,0xA5,0x15,0x54
//Tile number 0x024
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x69,0x59,0x6A,0xA5,0x55,0x54
//Tile number 0x025
,   0x55,0x55,0x7F,0xFD,0x7D,0x55,0x7F,0xF4,0x69,0x54,0x69,0x55,0x6A,0xA9,0x55,0x55
//Tile number 0x026
,   0x55,0x55,0x7F,0xFD,0x7D,0x55,0x7D,0x74,0x6A,0xA4,0x69,0x64,0x69,0x54,0x55,0x00
//Tile number 0x027
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x55,0x69,0xA9,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x028
,   0x55,0x15,0x7D,0x1D,0x7D,0x5D,0x7F,0xFD,0x69,0x59,0x69,0x19,0x69,0x19,0x55,0x15
//Tile number 0x029
,   0x15,0x54,0x1F,0xF4,0x17,0xD4,0x07,0xD0,0x06,0x90,0x16,0x94,0x1A,0xA4,0x15,0x54
//Tile number 0x02A
,   0x05,0x55,0x07,0xFD,0x05,0xF5,0x01,0xF4,0x55,0xA4,0x65,0xA4,0x5A,0x94,0x15,0x50
//Tile number 0x02B
,   0x55,0x15,0x7D,0x5D,0x7D,0x75,0x7F,0xD4,0x69,0x94,0x69,0x65,0x69,0x59,0x55,0x15
//Tile number 0x02C
,   0x55,0x00,0x7D,0x00,0x7D,0x00,0x7D,0x00,0x69,0x15,0x69,0x59,0x6A,0xA9,0x55,0x55
//Tile number 0x02D
,   0x55,0x15,0x7D,0x5D,0x7F,0x7D,0x7D,0xDD,0x69,0x59,0x69,0x19,0x69,0x19,0x55,0x15
//Tile number 0x02E
,   0x55,0x15,0x7D,0x5D,0x7F,0x5D,0x7D,0xDD,0x69,0x69,0x69,0x59,0x69,0x19,0x55,0x15
//Tile number 0x02F
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x030
,   0x15,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x6A,0xA5,0x69,0x54,0x69,0x00,0x55,0x00
//Tile number 0x031
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x99,0x69,0x69,0x5A,0xA9,0x15,0x55
//Tile number 0x032
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x6A,0xA5,0x69,0x65,0x69,0x59,0x55,0x15
//Tile number 0x033
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x5F,0xD4,0x15,0x65,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x034
,   0x55,0x55,0x7F,0xFD,0x57,0xD5,0x07,0xD0,0x06,0x90,0x06,0x90,0x06,0x90,0x05,0x50
//Tile number 0x035
,   0x55,0x15,0x7D,0x1D,0x7D,0x1D,0x7D,0x1D,0x69,0x19,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x036
,   0x55,0x15,0x7D,0x1D,0x7D,0x1D,0x7D,0x1D,0x69,0x59,0x5A,0x65,0x16,0x94,0x05,0x50
//Tile number 0x037
,   0x55,0x15,0x7D,0x5D,0x7D,0xDD,0x7D,0xDD,0x69,0x99,0x69,0x99,0x5A,0x65,0x15,0x54
//Tile number 0x038
,   0x55,0x15,0x7F,0x5D,0x5F,0x75,0x1F,0xD4,0x16,0xA4,0x59,0xA5,0x65,0xA9,0x54,0x55
//Tile number 0x039
,   0x55,0x15,0x7D,0x1D,0x7D,0x5D,0x5F,0x75,0x16,0x94,0x06,0x90,0x06,0x90,0x05,0x50
//Tile number 0x03A
,   0x55,0x55,0x7F,0xFD,0x55,0x75,0x1F,0xD4,0x16,0xA4,0x59,0x55,0x6A,0xA9,0x55,0x55
//Tile number 0x03B
,   0x0F,0xF0,0x0F,0x54,0x0F,0x40,0x0F,0x40,0x0A,0x40,0x0A,0x40,0x0A,0xA0,0x01,0x54
//Tile number 0x03C
,   0xF0,0xF0,0x3F,0xD4,0x0F,0x50,0xFF,0xF0,0x1A,0x54,0xAA,0xA0,0x1A,0x54,0x01,0x40
//Tile number 0x03D
,   0x3F,0xC0,0x07,0xD0,0x03,0xD0,0x03,0xD0,0x02,0x90,0x02,0x90,0x2A,0x90,0x05,0x50
//Tile number 0x03E
,   0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x40,0x0D,0xD0,0x34,0x34,0x10,0x04,0x00,0x00
//Tile number 0x03F
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x040
,   0x0F,0xC0,0x35,0x70,0xD7,0x0C,0xD3,0xFD,0x92,0x59,0x20,0x65,0x0A,0x94,0x01,0x50
//Tile number 0x041
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x6A,0xA9,0x69,0x59,0x55,0x15
//Tile number 0x042
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7F,0xF5,0x69,0x59,0x69,0x59,0x6A,0xA5,0x55,0x54
//Tile number 0x043
,   0x15,0x54,0x5F,0xF5,0x7D,0x7D,0x7D,0x55,0x69,0x55,0x69,0x69,0x5A,0xA5,0x15,0x54
//Tile number 0x044
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x69,0x59,0x6A,0xA5,0x55,0x54
//Tile number 0x045
,   0x55,0x55,0x7F,0xFD,0x7D,0x55,0x7F,0xF4,0x69,0x54,0x69,0x55,0x6A,0xA9,0x55,0x55
//Tile number 0x046
,   0x55,0x55,0x7F,0xFD,0x7D,0x55,0x7D,0x74,0x6A,0xA4,0x69,0x64,0x69,0x54,0x55,0x00
//Tile number 0x047
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x55,0x69,0xA9,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x048
,   0x55,0x15,0x7D,0x1D,0x7D,0x5D,0x7F,0xFD,0x69,0x59,0x69,0x19,0x69,0x19,0x55,0x15
//Tile number 0x049
,   0x15,0x54,0x1F,0xF4,0x17,0xD4,0x07,0xD0,0x06,0x90,0x16,0x94,0x1A,0xA4,0x15,0x54
//Tile number 0x04A
,   0x05,0x55,0x07,0xFD,0x05,0xF5,0x01,0xF4,0x55,0xA4,0x65,0xA4,0x5A,0x94,0x15,0x50
//Tile number 0x04B
,   0x55,0x15,0x7D,0x5D,0x7D,0x75,0x7F,0xD4,0x69,0x94,0x69,0x65,0x69,0x59,0x55,0x15
//Tile number 0x04C
,   0x55,0x00,0x7D,0x00,0x7D,0x00,0x7D,0x00,0x69,0x15,0x69,0x59,0x6A,0xA9,0x55,0x55
//Tile number 0x04D
,   0x55,0x15,0x7D,0x5D,0x7F,0x7D,0x7D,0xDD,0x69,0x59,0x69,0x19,0x69,0x19,0x55,0x15
//Tile number 0x04E
,   0x55,0x15,0x7D,0x5D,0x7F,0x5D,0x7D,0xDD,0x69,0x69,0x69,0x59,0x69,0x19,0x55,0x15
//Tile number 0x04F
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x59,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x050
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x6A,0xA5,0x69,0x54,0x69,0x00,0x55,0x00
//Tile number 0x051
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x7D,0x5D,0x69,0x99,0x69,0x69,0x5A,0xA9,0x15,0x55
//Tile number 0x052
,   0x55,0x54,0x7F,0xF5,0x7D,0x5D,0x7D,0x5D,0x6A,0xA5,0x69,0x65,0x69,0x59,0x55,0x15
//Tile number 0x053
,   0x15,0x54,0x5F,0xF5,0x7D,0x5D,0x5F,0xD4,0x15,0x65,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x054
,   0x55,0x55,0x7F,0xFD,0x57,0xD5,0x07,0xD0,0x06,0x90,0x06,0x90,0x06,0x90,0x05,0x50
//Tile number 0x055
,   0x55,0x15,0x7D,0x1D,0x7D,0x1D,0x7D,0x1D,0x69,0x19,0x69,0x59,0x5A,0xA5,0x15,0x54
//Tile number 0x056
,   0x55,0x15,0x7D,0x1D,0x7D,0x1D,0x7D,0x1D,0x69,0x59,0x5A,0x65,0x16,0x94,0x05,0x50
//Tile number 0x057
,   0x55,0x15,0x7D,0x5D,0x7D,0xDD,0x7D,0xDD,0x69,0x99,0x69,0x99,0x5A,0x65,0x15,0x54
//Tile number 0x058
,   0x55,0x15,0x7F,0x5D,0x5F,0x75,0x1F,0xD4,0x16,0xA4,0x59,0xA5,0x65,0xA9,0x54,0x55
//Tile number 0x059
,   0x55,0x15,0x7D,0x1D,0x7D,0x5D,0x5F,0x75,0x16,0x94,0x06,0x90,0x06,0x90,0x05,0x50
//Tile number 0x05A
,   0x55,0x55,0x7F,0xFD,0x55,0x75,0x1F,0xD4,0x16,0xA4,0x59,0x55,0x6A,0xA9,0x55,0x55
//Tile number 0x05B
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x05C
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x05D
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x05E
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x05F
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x060
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x061
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x062
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//Tile number 0x063
,   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
#define FONT_ADDR &FntAsciiFontData2bpp[0]
#else
//
Uint8	*FntAsciiFontData2bpp = NULL;
//Uint8	FntAsciiFontData2bpp[1600];
#define FONT_ADDR &FntAsciiFontData2bpp[0]
#endif
extern unsigned char col[4];
/*
static	Uint8 *FNT_SerchFont8_2bpp(Uint8 code)
{
//	if(code >= 0x20 && code < 0x80)
//		return((Uint8 *)(FONT_ADDR+((Uint32 )(code-0x20))*16));
		return((Uint8 *)(FONT_ADDR+((Uint32 )(code-0x20)<<4)));
//	    return((Uint8 *)(FntAsciiFontData2bpp+((Uint32 )(code-0x20))*16));

//	return((Uint8 *)FntAsciiFontData2bpp);
//return ((Uint8 *)FONT_ADDR);
//FONT_ADDR
}
*/

static inline void  FNT_Print1Char256_8x8_2bpp(Uint8 *vram,Uint8 code,Uint16 x,Uint16 y)
{
	Uint8	*codep = ((Uint8 *)(FONT_ADDR+((Uint32 )(code-0x20)<<4)));//FNT_SerchFont8_2bpp(code);
	Uint8 *vramL = &vram[x	+ (y<<8)];

	for(Uint32 i=0;i<0x10;i++) 
	{
		*(vramL++)= (Uint8 )((col[ (codep[i]>>6 ) & (0x03)]<<4) |col[(codep[i]>>4) & (0x03)]);
		*(vramL++)= (Uint8 )((col[ (codep[i]>>2 ) & (0x03)]<<4) |col[(codep[i]>>0) & (0x03)]);

		if(i & 1)
			   vramL+=252;
	}
}

static inline void  FNT_Print1Char256_8x8_2bppSel(Uint8 *vram,Uint8 code,Uint16 x,Uint16 y)
{
	unsigned int col[4]={0,13,14,15};

	Uint8	*codep = ((Uint8 *)(FONT_ADDR+((Uint32 )(code-0x20)<<4)));//FNT_SerchFont8_2bpp(code);
	Uint8 *vramL = &vram[x	+ (y<<8)];

	for(Uint32 i=0;i<0x10;i++) 
	{
		*(vramL++)= (Uint8 )((col[ (codep[i]>>6 ) & (0x03)]<<4) |col[(codep[i]>>4) & (0x03)]);
		*(vramL++)= (Uint8 )((col[ (codep[i]>>2 ) & (0x03)]<<4) |col[(codep[i]>>0) & (0x03)]);

		if(i & 1)
			   vramL+=252;
	}
}

void  FNT_Print256_2bppSel(volatile Uint8 *vram,volatile Uint8 *str,Uint16 x,Uint16 y)
{
	while(*str) 
	{
			FNT_Print1Char256_8x8_2bppSel(vram,*(str++),x,y);
			x += 4;
	}
}

void  FNT_Print256_2bpp(volatile Uint8 *vram,volatile Uint8 *str,Uint16 x,Uint16 y)
{
	while(*str) 
	{
			FNT_Print1Char256_8x8_2bpp(vram,*(str++),x,y);
			x += 4;
	}
}

 #undef ACTION_REPLAY